meta:
  config_type: yolov-model-interface
  description: YOLO interface config
  format_version: 1.0

model:
  name: yolov7-seg
  version: v7
  type: anchor-based
  task: InstanceSeg

  input:
    shape: [1, 3, 640, 640]
    shape_seq: [0, 1, 2, 3]               # [batch, channels, height, width]
    dtype: float32
    normalize: true
    pad_resize: true
    format: "CHW"

  output:
    - name: det
      output_index: 0                     # output at index: 0
      shape: [1, 25200, 73]               # [batch, num_predictions, prediction_channels]
      shape_seq: [0, 1, 2]		            # keep shape as [batch, num_predictions, prediction_channels]
      type: detection
      format:
        box_range: [0, 3]
        objectness: 4
        class_range: [5, 40]
        mask_coeff_range: [41, 72]

    - name: mask
      output_index: 4                     # output at index: 4
      shape: [1, 32, 160, 160]            # [batch, channels, height, width]
      shape_seq: [0, 1, 2, 3]             # keep original shape to [batch, channels, height, width]
      type: mask_feature
      format:
        channels: 32
        spatial: [160, 160]

  anchors: 3              # anchors number
  grids:                  # num_predictions (anchor-based): (g0^2 + g1^2 + g2^2) * anchors
    - [80, 80]
    - [40, 40]
    - [20, 20]

  num_classes: 36
